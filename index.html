<!DOCTYPE html>
<html lang="en">
  <head>
    
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="utf-8">

    <link rel="stylesheet" href="index.css" type='text/css'>
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script>
        $(function() {
    $( "#slider" ).slider({
      range: true,
      min: new Date('2013.01.01').getTime() / 1000,
      max: new Date('2017.12.31').getTime() / 1000,
      values: [ new Date('2013.01.01').getTime() / 1000, new Date('2017.12.31').getTime() / 1000 ],
      slide: function( event, ui ) {
        var aux1 = new Date(ui.values[ 0 ] *1000).toDateString();
        var mes1 = aux1.substring(4, 7);
        var year1 = aux1.substring(11,15);
        var date1 = mes1+ " "+year1;
        var aux2 = new Date(ui.values[ 1 ] *1000).toDateString() ;
        var mes2 = aux2.substring(4, 7);
        var year2 = aux2.substring(11,15);
        var date2 = mes2+ " "+year2;
        updateGraphsSlider(date1,date2);
        $( "#amount" ).val( date1  + " - " + date2);

      }
    });

    $( "#amount" ).val("Jan 2013" + " - " +  "Dec 2017");
  })
    </script>

 
  </head>
  
  <body>

    <div class="header">
      <img src="data/plane.png" class="img" alt="plane" height="50" width="75">
      <a  class="logo">U.S.A FLIGHT PATTERNS</a>
      
      <div class="header-right" id="change">
        <a class="active" href="#Arrivals" id="arrivals">Arrivals</a>
        <a href="#Departures" id="departures">Departures</a>
        <a href="#Cancellations" id="cancelattions">Cancellations</a>
        <a href="#Delays" id="delays">Delays</a>
      </div>

      <script>
          $("a").click(function(){
            if ($("a").hasClass("active")){
              $("a").removeClass("active");
            }

            $(this).addClass("active");
            ////// FILTROS /////////
            if(this.id=="arrivals")
            {
              updateGraphFilters(true,false,false,false);
            }
            else if(this.id=="departures")
            {
              updateGraphFilters(false,true,false,false);
            }
            else if(this.id=="cancelattions")
            {
              updateGraphFilters(false,false,true,false);
            }
            else if(this.id=="delays")
            {
              updateGraphFilters(false,false,false,true);
            }
          });
          
      </script>
      <div id="slider-container">
        <div id="slider"></div>
        <div id="date_range">
        <p>
          <label for="amount">Date range:</label>
          <input type="text" id="amount" readonly style="border:0; color:#f6931f; font-weight:bold; font-size:12px; background-color: #f1f1f1;">
        </p>
        </div>
    </div>
    <div class="dropdown">
        <button class="dropbtn">Holidays</button>
        
        <div class="dropdown-content">
          <a href="#4" id="1">4th of July</a>
          <a href="#Thanksgiving" id="2">Thanksgiving</a>
          <a href="#Christmas" id="3">Christmas</a>
          <a href="#NewYearsEve" id="4">New Year's Eve</a>
        </div>
      </div>
      <div id="Holiday">
        <p id="h1">Holiday: 4th of July</p>
        <p id="h2">Holiday: Thanksgiving</p>
        <p id="h3">Holiday: Christmas</p>
        <p id="h4">Holiday: New Year's Eve</p>
      </div>
    </div>
    <script>
      $(document).ready(function(){
        $("#1").click(function(){
          $("#h3").hide();
          $("#h2").hide();
          $("#h4").hide();
          $("#Holiday").css({"visibility": "visible"});
          $("#h1").show();
        });
      $("#2").click(function(){
          $("#h3").hide();
          $("#h1").hide();
          $("#h4").hide();
          $("#h2").show();
        });
      $("#3").click(function(){
          $("#h2").hide();
          $("#h1").hide();
          $("#h4").hide();
          $("#h3").show();
        });
       $("#4").click(function(){
          $("#h2").hide();
          $("#h1").hide();
          $("#h3").hide();
          $("#h4").show();
        });
        $("button").click(function(){
          $("#h2").hide();
          $("#h1").hide();
          $("#h3").hide();
          $("#h4").hide();
           $("#Holiday").css({"visibility": "hidden"});
        });

});
    </script>

    <div style="display: table; table-layout: fixed;">
      <div style="display: table-row; vertical-align: top;">
        <div  style="display: table-cell; vertical-align: top;">
          <div class="vis" id="vis"> </div>
          <div id="summ"> 
            <h2><center>Flight Summary</center></h2>
             <center><a ref="#state_seleccionado"><b> New York </b></a></center>
              <center><a ref="#total_flights"> 123456789 Flights</a></center>

            <table style="margin:5px;" align="center">
              <tr>
                  <td>
                      <img src="data/Routes.png" class="img" height="35" width="60"> 
                  </td>
                  <td>
                      <a ref="#top_route"> A <-> B </a>
                  </td>
              </tr>
              <tr>
                  <td>
                      <img src="data/airline.png" class="img" height="35" width="35">
                  </td>
                  <td>
                      <a ref="#top_airline"> TAP</a>
                  </td>
              </tr>
              <tr>
                  <td>
                      <img src="data/delay.png" class="img" height="35" width="35">
                  </td>
                  <td>
                      <a ref="#top_delay"> Porque sim</a>
                  </td>
              <tr>
                  <td>
                      <img src="data/cancel.png" class="img" height="35" width="35">
                  </td>
                  <td>
                      <a ref="#top_cancellation"> O Piloto esta doente </a>
                  </td>
              </tr>
                 
          </table>
          </div>
        </div>
       <div  style="display: table-cell;">
          <div id="tooltip"></div>
          <div id="chord_d"></div>
        </div>
        <div class="heatmap" id ="heatmap" style="display: table-cell;""></div>
      </div>
    </div>

  </body>

    <script src="lib/d3v4.js"></script>
    <script src="lib/d3.js"></script>
    <script src="lib/linq/linq.js"></script>
    <script src="lib/moment.js"></script>
    <script src="lib/underscore.js"></script>
    <script src="lib/underscore.aggregate.min.js"></script>
    
    <script src="http://d3js.org/queue.v1.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/lodash.js/0.10.0/lodash.min.js"></script>
    <script src="https://unpkg.com/datalib@1.8.0/datalib.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/alasql@0.4"></script>    

    <script src="js/mapper.js"></script>
    <script src="js/usamap.js"></script>
  
</html>


